exports.id=0,exports.modules={"./src/server.js":function(e,o,n){"use strict";n.r(o);var s=n("express"),t=n.n(s),r=n("jsonwebtoken"),a=n.n(r),c=n("mongoose"),i=n.n(c),u=i.a.Schema({email:{type:String,required:!0,unique:!0,match:/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/},password:{type:String,required:!0}}),d=i.a.model("User",u),l=Object(s.Router)();l.get("/",function(e,o){o.json({message:"I am a server route and can also be hot reloaded!"})}),l.post("/user",function(e,o,n){var s=e.headers.authorization;void 0!==s?(e.token=s,n()):o.status(403)},function(e,o,n){a.a.verify(e.token,"secret",function(e,s){e&&o.sendStatus(403),n()})},function(e,o){console.log(e.body),new d({email:e.body.email,password:e.body.password}).save().then(function(){o.json({status:200,token:e.token})})}),l.post("/login",function(e,o){console.log(e.body),d.find({email:e.body.email}).exec().then(function(n){n<1&&o.status(403).json({message:"user not found"}),console.log(n,e.body),n[0].password===e.body.password&&a.a.sign({user:n},"secret",function(e,s){s?o.json({token:s}):o.json({user:n})}),o.status(403).json({message:"auth fail"})})});var f=l,p=n("body-parser"),g=n.n(p),h=i.a.connect("mongodb://localhost:27017/prueba",{useNewUrlParser:!0});h.on("error",console.error.bind(console,"connection error:"));h.once("open",function(){User.find({},{},function(e,o){i.a.connection.close()})});var m=t()();m.use(function(e,o,n){o.header("Access-Control-Allow-Origin","*"),o.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept,Authorization"),o.header("Access-Control-Allow-Methods","GET,PUT,POST,DELETE"),n()}),m.use(g.a.json()),m.use(g.a.urlencoded({extended:!0})),m.use("/",f);o.default=m}};